# تقرير برومبتز تكاملية نهائية لمشروع برايت
## مكمل لملف: تقارير للمشروع/برومبتز.md
## التاريخ: 2026-02-21

## قاعدة إلزامية عامة لكل البرومبتز
- يمنع منعًا باتًا تعديل `title` أو `meta description` أو `og:description` في أي صفحة.
- جميع البرومبتز في هذا الملف خاضعة لهذه القاعدة حتى لو لم تُذكر داخل نص البرومبت نفسه.
- تعديل العناوين والأوصاف لا يتم إلا عبر مهمة مستقلة وبموافقة صريحة.

---

## لوحة المهام التنفيذية
حالة الملف: ملف مهام تنفيذي.
آخر تحديث للحالة: 2026-02-21

- [x] برومبت 0: التحقق الكامل من صحة الروابط الداخلية ثم إصلاحها.
- [ ] برومبت M-01: إيقاف تسريب المفاتيح فورًا.
- [ ] برومبت M-02: توحيد البار العلوي ومربع البحث بكل صفحات الخدمات الرئيسية.
- [ ] برومبت M-03: إصلاح المسارات المكسورة وتكرار السكربتات.
- [ ] برومبت M-04: تصحيح روابط التحويل داخل الرئيسية والبحث.
- [ ] برومبت M-05: إصلاحات SEO سريعة مكمّلة.
- [ ] برومبت V-01: تشغيل الشات بوت بالكامل وربطه بخادم Groq.
- [ ] برومبت V-02: دمج نسختي الخادم ومنع ازدواجية الصيانة.
- [ ] برومبت V-03: منصة بحث موحدة مع فهرس صفحات حي.
- [ ] برومبت V-04: خطة قياس تحويل كاملة.
- [ ] برومبت V-05: إصلاح الاختبارات ومنع الانكسار المستقبلي.
- [ ] برومبت A-01: إعادة هندسة بنية صفحات الخدمات للتحويل.
- [ ] برومبت A-02: توسعة SEO دلالي للسوق السعودي التجاري.
- [ ] برومبت A-03: تحسين الأداء العميق لملفات JS/CSS.
- [ ] برومبت A-04: توحيد نظام التصميم بين الموقع الرئيسي والمنصة.
- [ ] برومبت A-05: خطة نشر آمنة ومتكاملة.

---

## 1) تحليل تكميلي سريع للفجوات غير المغطاة بالكامل

الملف السابق قوي في الفهرسة والربط الداخلي، لكنه لا يغطي بعمق هذه النقاط الحرجة:

1. **أمن المفاتيح**: توجد مفاتيح حساسة مكشوفة في ملفات الواجهة وملفات البيئة.
2. **الشات بوت**: توجد عدة تطبيقات شات متوازية (تجريبية/محلية/Gemini مباشر) بدون توحيد، وبعضها غير مرتبط بخادم آمن.
3. **البحث العام**: منطق البحث موجود لكنه غير مفعل على أغلب صفحات الخدمات الأساسية، وروابطه نسبية وتنكسر خارج الصفحة الرئيسية.
4. **الملاحة الموحدة**: البار العلوي غير موحد بين الصفحات، وفي بعض الصفحات تكرارات أو مسارات سكربتات غير صحيحة.
5. **سلامة البناء**: توجد ملفات تحمل نفس السكربت أكثر من مرة، ومسارات أصول غير موجودة، واختبار مشروع المنصة يفشل بسبب تبعية ناقصة.
6. **التكامل بين نسخ الخادم**: يوجد تكرار كبير بين `backend/` و`server/` مما يضاعف تكلفة الصيانة ويزيد احتمال الانحراف.

---

## 2) ترتيب البرومبتز حسب سرعة التنفيذ

- **مرتفع السرعة**: تحسينات سريعة عالية الأثر (ساعات إلى يوم).
- **متوسط السرعة**: تحسينات تكاملية (يومين إلى 4 أيام).
- **عادي السرعة**: إعادة هيكلة أوسع (أسبوع تقريبًا).

---

# أولاً: برومبتز مرتفع السرعة

## برومبت 0: التحقق الكامل من صحة الروابط الداخلية ثم إصلاحها
حالة التنفيذ: تم التنفيذ بالكامل بتاريخ 2026-02-21.

```text
قبل تنفيذ أي برومبت آخر في BrightAI، نفّذ مرحلة فحص روابط داخلية شاملة وإصلاح كامل.

قيد إلزامي ثابت:
- لا تعدّل title أو meta description أو og:description أثناء التنفيذ.

المرحلة 1: التحليل الكامل (إلزامي أولاً)
1) افحص كل ملفات HTML القابلة للنشر في:
   - index.html
   - docs.html
   - frontend/pages/**/*.html
2) استخرج كل href/src داخلية فقط (مع استبعاد: http/https/mailto/tel/javascript/data/#).
3) تحقّق من صحة كل رابط فعليًا على نظام الملفات مع دعم:
   - المسار المباشر
   - المسار + .html
   - المسار + /index.html
4) أنشئ تقرير broken_links شامل يحتوي:
   - الملف المصدر
   - الرابط المكسور
   - نوع الكسر (مسار خاطئ/ملف غير موجود/امتداد غير متسق/رابط مؤقت)
5) صنّف النتائج:
   - CRITICAL: روابط صفحات خدمات/تحويل/تواصل
   - HIGH: روابط تنقل رئيسي/مدونة/قطاعات
   - MEDIUM: روابط وثائق وأدوات
   - LOW: روابط داخلية ثانوية

المرحلة 2: الإصلاح الكامل (إلزامي)
1) أصلح كل الروابط المكسورة في الـ Nav والـ Footer والـ CTA والبحث الداخلي.
2) وحّد نمط الروابط الداخلية في المشروع (صيغة واحدة متسقة).
3) أصلح المسارات النسبية الخاطئة في الصفحات العميقة (خصوصًا صفحات البوتات).
4) استبدل أي رابط placeholder أو صفحة غير موجودة برابط صحيح موجود فعليًا.
5) أعد تشغيل فحص الروابط بعد الإصلاح حتى تصبح النتيجة:
   - 0 أخطاء في الصفحات الأساسية للتحويل
   - 0 أخطاء في مسارات التنقل الرئيسية

المرحلة 3: تحقق نهائي (إجباري قبل الانتقال)
1) أخرج تقرير before/after بالأرقام:
   - عدد الروابط المفحوصة
   - عدد الروابط المكسورة قبل الإصلاح
   - عدد الروابط المكسورة بعد الإصلاح
2) لا تبدأ أي برومبت لاحق قبل نجاح هذا التحقق.
```

---

## برومبت M-01: إيقاف تسريب المفاتيح فورًا

```text
حلل كامل مشروع BrightAI ونفّذ تنظيفًا أمنيًا فوريًا لمفاتيح API المكشوفة.

المهام الإلزامية:
1) ابحث عن كل المفاتيح المكشوفة (Groq/Gemini/Google) في:
   - .env
   - .env.example
   - frontend/env.js
   - frontend/js/chat-widget.js
   - frontend/pages/**
2) أزل جميع القيم الحقيقية واستبدلها بقيم Placeholder آمنة.
3) حوّل أي استدعاء مباشر من المتصفح إلى api.groq.com أو generativelanguage.googleapis.com إلى استدعاء خادم داخلي فقط.
4) أضف فحص ما قبل الكومِت يمنع رفع أي مفاتيح تبدأ بـ gsk_ أو AIza.
5) أضف توثيق عربي واضح في README حول إدارة الأسرار في التطوير والإنتاج.

القيود:
- لا تكسر أي واجهة موجودة.
- لا تغيّر العناوين والوصف SEO.

نتيجة التنفيذ المطلوبة:
- قائمة الملفات التي نُظّفت.
- إثبات عدم وجود مفاتيح حقيقية بعد التنفيذ (بحث نصي نهائي).
```

---

## برومبت M-02: توحيد البار العلوي ومربع البحث بكل صفحات الخدمات الرئيسية

```text
نفّذ توحيدًا كاملاً للبار العلوي + البحث في صفحات الخدمات الرئيسية بمشروع BrightAI.

الصفحات المستهدفة إلزاميًا:
- frontend/pages/smart-automation/index.html
- frontend/pages/data-analysis/index.html
- frontend/pages/ai-agent/index.html
- frontend/pages/smart-medical-archive/index.html
- frontend/pages/ai-workflows/index.html
- frontend/pages/consultation/index.html
- frontend/pages/ai-bots/index.html
- frontend/pages/about-us/index.html
- frontend/pages/contact/index.html
- frontend/pages/our-products/index.html
- frontend/pages/what-is-ai/index.html
- frontend/pages/tools/index.html

المطلوب:
1) اعتماد مكوّن Nav موحّد بنفس العناصر والترتيب والروابط.
2) إضافة زر بحث في سطح المكتب والجوال داخل كل Nav.
3) تحميل ملف بحث موحد على كل الصفحات.
4) إصلاح البحث ليستخدم روابط مطلقة تبدأ بـ / بدل الروابط النسبية.
5) إذا لم يوجد search modal في الصفحة، أنشئه ديناميكيًا عبر جافاسكربت.
6) ضمان عمل Ctrl/Cmd+K في كل الصفحات المستهدفة.

اختبارات القبول:
- كل صفحة تفتح مودال البحث.
- نتائج البحث تفتح صفحات صحيحة بدون 404.
- لا يوجد تكرار عناصر Nav أو Backdrop أو Drawer.
```

---

## برومبت M-03: إصلاح المسارات المكسورة وتكرار السكربتات

```text
حلل صفحات BrightAI وأصلح مشاكل تحميل السكربتات والأصول.

المهام:
1) أصلح المسارات الخاطئة لملفات navigation.js في صفحات البوتات الفرعية.
2) أصلح مراجع frontend/js/dist/*.bundle.js غير الموجودة في صفحات المقابلات (admin + Visitor-registration).
3) أزل أي تكرار لتحميل main.bundle.js في نفس الصفحة.
4) افحص كل صفحات HTML داخل frontend/pages وتأكد أن كل src/href محلي يشير لملف موجود فعلاً.
5) أنشئ تقرير فني بعد الإصلاح: قبل/بعد وعدد الروابط المكسورة التي تم حلها.

القيود:
- لا تحذف ميزات الصفحة.
- لا تغيّر title/description.
```

---

## برومبت M-04: تصحيح روابط التحويل داخل الرئيسية والبحث

```text
نفّذ تدقيق Conversion Links في مشروع BrightAI وأصلح الروابط غير الموجودة.

المطلوب:
1) افحص روابط CTA في الصفحة الرئيسية والفوتر والبحث.
2) أصلح أو استبدل الروابط غير الموجودة مثل careers/partners أو أي مسار مفقود.
3) وحّد نمط الروابط الداخلية (إما .html كامل أو مسارات نظيفة مدعومة فعليًا بمنصة النشر).
4) أضف تتبع أحداث GA4 لزر التواصل، زر طلب الاستشارة، ونتائج البحث.

ناتج التنفيذ:
- جدول روابط مكسورة تم إصلاحها.
- روابط CTA الأساسية تعمل 100%.
```

---

## برومبت M-05: إصلاحات SEO سريعة مكمّلة

```text
طبّق تحسينات SEO السريعة غير المنجزة بالكامل.

المهام:
1) إصلاح مسارات og:image النسبية الخاطئة لتكون روابط مطلقة صحيحة.
2) توحيد canonical + hreflang + og:url في كل صفحات الخدمات الرئيسية.
3) إزالة أي تعارض بين URL الفعلي والرابط داخل السكيما.
4) تدقيق sitemap.xml لاكتشاف روابط غير موجودة أو روابط ضعيفة الجودة وإزالتها.

القيود:
- لا تغيير title أو meta description.

النتيجة:
- تقرير صفحات قبل/بعد مع حالة canonical وog:image.
```

---

# ثانيًا: برومبتز متوسط السرعة

## برومبت V-01: تشغيل الشات بوت بالكامل وربطه بخادم Groq (مطلوبك الأساسي)

```text
نفّذ شات بوت موحّد للإنتاج في BrightAI مرتبط بالكامل بـ Groq عبر الخادم.

نطاق التنفيذ:
- واجهة: الصفحة الرئيسية + صفحات الخدمات الرئيسية.
- خادم: endpoint موحّد آمن يدعم streaming.

المطلوب الفني:
1) إنشاء خدمة واجهة موحدة للشات (ملف JS واحد) بدل تكرار المنطق بعدة ملفات.
2) ربط الواجهة مع endpoint داخلي مثل /api/groq/stream أو /api/chat/stream فقط.
3) منع أي استدعاء مباشر لـ Groq من المتصفح.
4) دعم تدفق الرد حرفيًا/مقطعيًا في الواجهة (SSE/stream reader).
5) إضافة حالات UI: loading, error, retry, offline.
6) حفظ آخر N رسائل في sessionStorage مع احترام الخصوصية.
7) إضافة System Prompt مؤسسي سعودي موحد داخل الخادم.
8) تسجيل أحداث analytics: فتح الشات، إرسال رسالة، نجاح/فشل الرد.
9) توحيد تصميم الشات في كل الصفحات المستهدفة.

الاختبار الإلزامي:
- سيناريو نجاح كامل.
- سيناريو مفتاح غير مهيأ.
- سيناريو timeout.
- سيناريو rate limit.

ناتج التنفيذ:
- قائمة ملفات معدلة.
- خطوات تشغيل محلية واضحة.
- إثبات أن الشات يعمل من الواجهة إلى Groq عبر الخادم فقط.
```

---

## برومبت V-02: دمج نسختي الخادم ومنع ازدواجية الصيانة

```text
وحّد كود الخادم بين مجلدي backend وserver لتقليل التكرار.

المهام:
1) اختر مصدرًا واحدًا للحقيقة (Single Source of Truth).
2) انقل/ادمج نقاط النهاية المشتركة (chat, groq, search, summary, medical).
3) وحد config, middleware, utils.
4) حدث package scripts لتشغيل الخادم الموحد فقط.
5) أضف اختبارات endpoint أساسية للصحة + الشات + Groq stream.

النتيجة:
- إزالة الازدواجية.
- خادم واحد قابل للصيانة.
```

---

## برومبت V-03: منصة بحث موحدة مع فهرس صفحات حي

```text
حوّل البحث من فهرس ثابت داخل search.js إلى فهرس يُبنى تلقائيًا من الصفحات الفعلية.

المطلوب:
1) إنشاء مولّد فهرس (JSON) من ملفات الصفحات والخدمات والمقالات.
2) تحميل الفهرس في البحث بدلاً من البيانات المضمنة داخل السكربت.
3) دعم تصحيح الأخطاء الإملائية العربية البسيطة.
4) إضافة أوزان ترتيب: خدمات > صفحات تحويل > حالات استخدام > مقالات.
5) إضافة No Results state مع CTA مباشر للتواصل.

النتيجة:
- بحث أدق وأسهل صيانة.
- تقليل الروابط المكسورة الناتجة عن الفهرس اليدوي.
```

---

## برومبت V-04: خطة قياس تحويل كاملة

```text
نفّذ طبقة قياس Conversion موحدة لموقع BrightAI.

الأحداث الإلزامية:
- view_service_page
- click_primary_cta
- open_search
- submit_search
- open_chat
- send_chat_message
- request_consultation

المهام:
1) توحيد dataLayer schema لكل الصفحات الأساسية.
2) إرسال أحداث مع page_type + service_name + source.
3) إنشاء Dashboard قياس أسبوعي (ملف تقرير تلقائي بصيغة md).

الناتج:
- قياس واضح لتأثير أي تحسين SEO/UX على التحويل.
```

---

## برومبت V-05: إصلاح الاختبارات ومنع الانكسار المستقبلي

```text
ثبّت بيئة الاختبارات في المشروع الرئيسي ومنصة brightai-platform.

المهام:
1) إصلاح اختبار App.test.tsx والتبعيات الناقصة.
2) إضافة اختبار تكاملي للشات endpoint.
3) إضافة اختبار فحص روابط HTML الحرجة.
4) إضافة أمر CI يفشل عند وجود مفاتيح مكشوفة أو روابط داخلية مكسورة.

الناتج:
- خط حماية جودة قبل أي نشر.
```

---

# ثالثًا: برومبتز عادي السرعة

## برومبت A-01: إعادة هندسة بنية صفحات الخدمات للتحويل

```text
أعد تصميم بنية صفحات الخدمات الأساسية لرفع التحويل B2B في السعودية.

لكل صفحة خدمة:
1) Above the fold: قيمة واضحة + قطاع مستهدف + CTA مباشر.
2) قسم Problem → Solution → Proof.
3) قسم حالات استخدام سعودية حقيقية حسب القطاع.
4) قسم مقارنة قبل/بعد بمؤشرات قابلة للقياس.
5) FAQ موجه لاعتراضات الشراء.
6) CTA نهائي بطلب استشارة تنفيذية.

قياس التأثير:
- زمن البقاء.
- نسبة النقر على CTA.
- معدل إرسال نموذج/واتساب.
```

---

## برومبت A-02: توسعة SEO دلالي للسوق السعودي التجاري

```text
نفّذ توسعة سيو دلالية تجارية فقط للسوق السعودي.

المهام:
1) إنشاء صفحات هبوط تجارية لكل نية شراء عالية القيمة (رياض/جدة/دمام).
2) تعيين كل كلمة مفتاحية تجارية لصفحة هبوط واحدة فقط.
3) إضافة Service + FAQ + Organization schema مخصص لكل صفحة هبوط.
4) بناء شبكة ربط داخلي تعزز الصفحات التجارية أولاً.

النتيجة:
- زيادة فرص الظهور في كلمات ذات نية تعاقدية.
```

---

## برومبت A-03: تحسين الأداء العميق لملفات JS/CSS

```text
نفّذ خطة أداء عميقة لتقليل وقت التحميل في الصفحات الأساسية.

المهام:
1) تقسيم main.bundle.js إلى وحدات حسب الصفحة.
2) إزالة الأكواد غير المستخدمة من bundles.
3) تحميل مكونات الشات والبحث عند الطلب (on interaction).
4) تقليل CLS عبر أحجام ثابتة للصور والمكونات.
5) إنتاج تقرير LCP/INP/CLS قبل/بعد.

النتيجة:
- صفحات أسرع وتحويل أعلى.
```

---

## برومبت A-04: توحيد نظام التصميم بين الموقع الرئيسي والمنصة

```text
وحّد عناصر الواجهة الأساسية بين الموقع الثابت والمنصة التفاعلية.

المهام:
1) توحيد الألوان، المسافات، الخطوط، الأزرار، الحقول.
2) استخراج tokens مشتركة في ملف واحد.
3) إنشاء دليل مكونات مختصر يشمل Nav/Search/Chat/CTA.
4) منع الانحراف البصري بين الصفحات.

الناتج:
- هوية بصرية موحدة تزيد الثقة المؤسسية.
```

---

## برومبت A-05: خطة نشر آمنة ومتكاملة

```text
ابنِ مسار نشر إنتاجي آمن للمشروع كاملاً.

المهام:
1) فصل بيئات dev/staging/prod.
2) إدارة مفاتيح آمنة عبر متغيرات منصة النشر فقط.
3) فحص تلقائي قبل النشر: اختبارات + روابط + أسرار + ميزانية أداء.
4) مراقبة runtime وتنبيهات الأعطال.

النتيجة:
- نشر موثوق بدون تسريب أسرار أو كسر وظائف.
```

---

## 3) تسلسل التنفيذ المقترح (نهائي)

1. برومبت 0: فحص وإصلاح الروابط الداخلية بالكامل
2. M-01
3. M-02
4. M-03
5. M-04
6. V-01
7. V-02
8. V-03
9. M-05
10. V-04
11. V-05
12. A-01
13. A-02
14. A-03
15. A-04
16. A-05

---

## 4) مخرجات مطلوبة بعد كل برومبت

- ملخص قصير لما تم.
- قائمة ملفات معدلة.
- ما تم اختباره فعليًا.
- الأثر على: SEO + UX + التحويل.
