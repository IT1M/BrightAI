!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".unified-nav"),t=document.querySelector(".hamburger-btn"),n=document.querySelector(".nav-links"),o=document.querySelector(".nav-overlay"),i=document.querySelectorAll(".dropdown-toggle");if(!e)return;let a=o;a||(a=document.createElement("div"),a.className="nav-overlay",document.body.appendChild(a));t&&n&&t.addEventListener("click",function(e){e.stopPropagation(),n.classList.contains("active")?d():(n.classList.add("active"),t.classList.add("active"),a.classList.add("active"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-label","إغلاق القائمة"),document.body.style.overflow="hidden")});a.addEventListener("click",d),i.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const t=this.closest(".nav-dropdown"),n=t.classList.contains("active");window.innerWidth<=1024&&document.querySelectorAll(".nav-dropdown.active").forEach(e=>{e!==t&&(e.classList.remove("active"),e.querySelector(".dropdown-toggle")?.setAttribute("aria-expanded","false"))}),t.classList.toggle("active"),this.setAttribute("aria-expanded",n?"false":"true")})}),document.addEventListener("click",function(e){e.target.closest(".unified-nav")||(d(),r())}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(d(),r())});let c,s=0;function d(){n&&n.classList.remove("active"),t&&(t.classList.remove("active"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label","فتح القائمة")),a&&a.classList.remove("active"),document.body.style.overflow=""}function r(){document.querySelectorAll(".nav-dropdown.active").forEach(e=>{e.classList.remove("active"),e.querySelector(".dropdown-toggle")?.setAttribute("aria-expanded","false")})}window.addEventListener("scroll",function(){const t=window.pageYOffset;t>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),s=t},{passive:!0}),window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(function(){window.innerWidth>1024&&d()},250)}),function(){const e=window.location.pathname.split("/").pop()||"index.html";document.querySelectorAll(".nav-links a").forEach(t=>{const n=t.getAttribute("href");if(n){const o=n.split("/").pop();(o===e||""===e&&"index.html"===o||"index.html"===e&&"#home"===n)&&t.classList.add("active")}})}()})}();