"use strict";class EnterpriseScrollAnimations{constructor(t={}){this.config={threshold:t.threshold||.15,rootMargin:t.rootMargin||"0px 0px -50px 0px",fadeInClass:t.fadeInClass||"animate-on-scroll",visibleClass:t.visibleClass||"is-visible",staggerClass:t.staggerClass||"stagger-item",staggerContainerClass:t.staggerContainerClass||"stagger-container",counterDuration:t.counterDuration||2e3,staggerDelay:t.staggerDelay||100,animationDuration:t.animationDuration||600,easing:t.easing||"cubic-bezier(0.4, 0, 0.2, 1)"},this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",t=>{this.prefersReducedMotion=t.matches,this.prefersReducedMotion&&this.applyReducedMotionFallback()}),this.observers={fadeIn:null,counter:null,stagger:null},this.animatedElements=new WeakSet,this.animatedCounters=new WeakSet}init(){if(!("IntersectionObserver"in window))return console.warn("[EnterpriseScrollAnimations] IntersectionObserver not supported, applying fallback"),void this.applyFallback();this.injectStyles(),this.initFadeInAnimations(),this.initCounterAnimations(),this.initStaggerAnimations(),console.log("[EnterpriseScrollAnimations] Initialized successfully",{reducedMotion:this.prefersReducedMotion})}injectStyles(){if(document.getElementById("enterprise-scroll-animations-styles"))return;const t=document.createElement("style");t.id="enterprise-scroll-animations-styles",t.textContent=`\n            /* ========== Fade-in Animation Styles ========== */\n            .animate-on-scroll {\n                opacity: 0;\n                transform: translateY(30px);\n                transition: opacity ${this.config.animationDuration}ms ${this.config.easing},\n                            transform ${this.config.animationDuration}ms ${this.config.easing};\n            }\n            \n            .animate-on-scroll.is-visible {\n                opacity: 1;\n                transform: translateY(0);\n            }\n            \n            /* Fade-in from left (for RTL support) */\n            .animate-on-scroll.from-left {\n                transform: translateX(30px);\n            }\n            \n            .animate-on-scroll.from-left.is-visible {\n                transform: translateX(0);\n            }\n            \n            /* Fade-in from right */\n            .animate-on-scroll.from-right {\n                transform: translateX(-30px);\n            }\n            \n            .animate-on-scroll.from-right.is-visible {\n                transform: translateX(0);\n            }\n            \n            /* Scale-in animation */\n            .animate-on-scroll.scale-in {\n                transform: scale(0.95);\n            }\n            \n            .animate-on-scroll.scale-in.is-visible {\n                transform: scale(1);\n            }\n            \n            /* ========== Stagger Animation Styles ========== */\n            .stagger-container .stagger-item {\n                opacity: 0;\n                transform: translateY(20px);\n                transition: opacity ${this.config.animationDuration}ms ${this.config.easing},\n                            transform ${this.config.animationDuration}ms ${this.config.easing};\n            }\n            \n            .stagger-container.is-visible .stagger-item {\n                opacity: 1;\n                transform: translateY(0);\n            }\n            \n            /* Stagger delays - generated dynamically */\n            ${this.generateStaggerDelays(12)}\n            \n            /* ========== Counter Animation Styles ========== */\n            [data-count] {\n                transition: color 0.3s ease;\n            }\n            \n            [data-count].counting {\n                color: var(--color-gold-500, #D4AF37);\n            }\n            \n            /* ========== Reduced Motion Support ========== */\n            @media (prefers-reduced-motion: reduce) {\n                .animate-on-scroll,\n                .stagger-container .stagger-item {\n                    opacity: 1 !important;\n                    transform: none !important;\n                    transition: none !important;\n                }\n                \n                .stagger-container.is-visible .stagger-item {\n                    transition-delay: 0ms !important;\n                }\n            }\n        `,document.head.appendChild(t)}generateStaggerDelays(t){let n="";for(let e=1;e<=t;e++)n+=`.stagger-container.is-visible .stagger-item:nth-child(${e}) {\n                transition-delay: ${(e-1)*this.config.staggerDelay}ms;\n            }\n`;return n}initFadeInAnimations(){const t=document.querySelectorAll(`.${this.config.fadeInClass}`);t.length&&(this.prefersReducedMotion?t.forEach(t=>{t.classList.add(this.config.visibleClass)}):(this.observers.fadeIn=new IntersectionObserver((t,n)=>{t.forEach(t=>{t.isIntersecting&&!this.animatedElements.has(t.target)&&(this.animatedElements.add(t.target),t.target.classList.add(this.config.visibleClass),n.unobserve(t.target),this.pushAnalyticsEvent("scroll_animation",{element_id:t.target.id||"unnamed",element_class:t.target.className}))})},{threshold:this.config.threshold,rootMargin:this.config.rootMargin}),t.forEach(t=>{this.observers.fadeIn.observe(t)})))}initStaggerAnimations(){const t=document.querySelectorAll(`.${this.config.staggerContainerClass}`);t.length&&(this.prefersReducedMotion?t.forEach(t=>{t.classList.add(this.config.visibleClass)}):(this.observers.stagger=new IntersectionObserver((t,n)=>{t.forEach(t=>{t.isIntersecting&&!this.animatedElements.has(t.target)&&(this.animatedElements.add(t.target),t.target.classList.add(this.config.visibleClass),n.unobserve(t.target),this.pushAnalyticsEvent("stagger_animation",{container_id:t.target.id||"unnamed",item_count:t.target.querySelectorAll(`.${this.config.staggerClass}`).length}))})},{threshold:.1,rootMargin:"0px 0px -30px 0px"}),t.forEach(t=>{this.observers.stagger.observe(t)})))}initCounterAnimations(){const t=document.querySelectorAll("[data-count]");t.length&&(this.prefersReducedMotion?t.forEach(t=>{const n=this.parseCounterValue(t.getAttribute("data-count"));t.textContent=this.formatNumber(n,t)}):(this.observers.counter=new IntersectionObserver((t,n)=>{t.forEach(t=>{t.isIntersecting&&!this.animatedCounters.has(t.target)&&(this.animatedCounters.add(t.target),this.animateCounter(t.target),n.unobserve(t.target))})},{threshold:.5,rootMargin:"0px"}),t.forEach(t=>{this.observers.counter.observe(t)})))}parseCounterValue(t){const n=t.match(/^([\d.]+)(.*)$/);return n?{number:parseFloat(n[1]),suffix:n[2]||"",hasDecimal:n[1].includes(".")}:{number:parseFloat(t)||0,suffix:"",hasDecimal:!1}}animateCounter(t){const n=this.parseCounterValue(t.getAttribute("data-count")),e=n.number,i=n.suffix,s=n.hasDecimal;if(isNaN(e))return void console.warn("[EnterpriseScrollAnimations] Invalid data-count value:",t.getAttribute("data-count"));t.classList.add("counting");const a=this.config.counterDuration,r=performance.now(),o=n=>{const l=n-r,c=Math.min(l/a,1),d=1-Math.pow(1-c,4),g=0+(e-0)*d;t.textContent=s?g.toFixed(1)+i:this.formatNumber(Math.floor(g),t)+i,c<1?requestAnimationFrame(o):(t.textContent=s?e.toFixed(1)+i:this.formatNumber(e,t)+i,t.classList.remove("counting"),this.pushAnalyticsEvent("counter_complete",{element_id:t.id||"unnamed",final_value:e+i}))};requestAnimationFrame(o)}formatNumber(t,n){if(n&&n.hasAttribute("data-no-format"))return t.toString();const e="rtl"===document.documentElement.dir?"ar-SA":"en-US";try{return Math.floor(t).toLocaleString(e)}catch(n){return Math.floor(t).toString()}}pushAnalyticsEvent(t,n){void 0!==window.dataLayer&&window.dataLayer.push({event:t,...n})}applyFallback(){document.querySelectorAll(`.${this.config.fadeInClass}`).forEach(t=>{t.classList.add(this.config.visibleClass),t.style.opacity="1",t.style.transform="none"}),document.querySelectorAll(`.${this.config.staggerContainerClass}`).forEach(t=>{t.classList.add(this.config.visibleClass)}),document.querySelectorAll("[data-count]").forEach(t=>{const n=this.parseCounterValue(t.getAttribute("data-count"));n.hasDecimal?t.textContent=n.number.toFixed(1)+n.suffix:t.textContent=this.formatNumber(n.number,t)+n.suffix})}applyReducedMotionFallback(){document.querySelectorAll(`.${this.config.fadeInClass}:not(.${this.config.visibleClass})`).forEach(t=>{t.classList.add(this.config.visibleClass)}),document.querySelectorAll(`.${this.config.staggerContainerClass}:not(.${this.config.visibleClass})`).forEach(t=>{t.classList.add(this.config.visibleClass)})}triggerAnimation(t){t.classList.contains(this.config.fadeInClass)&&t.classList.add(this.config.visibleClass),t.classList.contains(this.config.staggerContainerClass)&&t.classList.add(this.config.visibleClass),t.hasAttribute("data-count")&&!this.animatedCounters.has(t)&&(this.animatedCounters.add(t),this.animateCounter(t))}refresh(){this.destroy(),this.initFadeInAnimations(),this.initCounterAnimations(),this.initStaggerAnimations()}destroy(){Object.values(this.observers).forEach(t=>{t&&t.disconnect()}),this.observers={fadeIn:null,counter:null,stagger:null}}}"undefined"!=typeof module&&module.exports&&(module.exports={EnterpriseScrollAnimations:EnterpriseScrollAnimations}),document.addEventListener("DOMContentLoaded",()=>{window.enterpriseScrollAnimations=new EnterpriseScrollAnimations({threshold:.15,rootMargin:"0px 0px -50px 0px",counterDuration:2e3,staggerDelay:100,animationDuration:600}),window.enterpriseScrollAnimations.init()});