import{BrightAnimations}from"../animations.js";class RecruitmentHero{constructor(){this.canvas=document.getElementById("workflow-canvas"),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.particles=[],this.resize(),this.init(),window.addEventListener("resize",()=>this.resize()))}resize(){this.canvas.width=this.canvas.parentElement.offsetWidth,this.canvas.height=this.canvas.parentElement.offsetHeight}init(){this.createParticles(),this.animate()}createParticles(){for(let t=0;t<20;t++)this.particles.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,radius:2*Math.random()+1,speedX:1*Math.random()+.5,speedY:.5*(Math.random()-.5),color:`rgba(99, 102, 241, ${.5*Math.random()+.1})`})}animate(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(t=>{t.x+=t.speedX,t.y+=t.speedY,t.x>this.canvas.width&&(t.x=0),t.y>this.canvas.height&&(t.y=0),t.y<0&&(t.y=this.canvas.height),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),this.ctx.fillStyle=t.color,this.ctx.fill(),this.particles.forEach(e=>{const i=t.x-e.x,s=t.y-e.y,a=Math.sqrt(i*i+s*s);a<100&&(this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(99, 102, 241, ${.1*(1-a/100)})`,this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.stroke())})}),requestAnimationFrame(()=>this.animate())}}class ComparisonSlider{constructor(){this.container=document.querySelector(".comparison-slider"),this.container&&(this.handle=this.container.querySelector(".slider-handle"),this.after=this.container.querySelector(".after-side"),this.isDragging=!1,this.init())}init(){this.handle.addEventListener("mousedown",()=>this.isDragging=!0),window.addEventListener("mouseup",()=>this.isDragging=!1),window.addEventListener("mousemove",t=>this.move(t)),this.handle.addEventListener("touchstart",()=>this.isDragging=!0),window.addEventListener("touchend",()=>this.isDragging=!1),window.addEventListener("touchmove",t=>this.move(t.touches[0]))}move(t){if(!this.isDragging)return;const e=this.container.getBoundingClientRect();let i=t.clientX-e.left;i<0&&(i=0),i>e.width&&(i=e.width);const s=i/e.width*100;this.handle.style.left=`${s}%`,this.after.style.clipPath=`inset(0 ${100-s}% 0 0)`}}class InteractiveFlowchart{constructor(){this.steps=document.querySelectorAll(".flow-step"),this.details=document.getElementById("flow-details"),this.steps.length&&this.init()}init(){this.steps.forEach((t,e)=>{t.addEventListener("click",()=>this.activateStep(e))})}activateStep(t){this.steps.forEach(t=>t.classList.remove("active","ring-2","ring-indigo-500")),this.steps[t].classList.add("active","ring-2","ring-indigo-500"),this.details&&gsap.to(this.details,{opacity:0,y:20,duration:.3,onComplete:()=>{const e=this.steps[t].dataset.details;this.details.innerHTML=e||"تفاصيل الخطوة...",gsap.to(this.details,{opacity:1,y:0,duration:.3})}})}}class RecruitmentDemo{constructor(){this.chatContainer=document.getElementById("demo-chat"),this.chatContainer&&this.startDemo()}async startDemo(){const t=[{type:"bot",text:"مرحباً! أنا مساعد التوظيف الذكي. كيف يمكنني مساعدتك اليوم؟"},{type:"user",text:"ابحث عن مطور واجهات أمامية خبرة 3 سنوات."},{type:"bot",text:"جاري البحث في قاعدة البيانات..."},{type:"bot",text:"وجدت 5 مرشحين يطابقون المواصفات بدقة 95%. هل تود استعراض التفاصيل؟"}];for(const e of t)await this.addMessage(e),await new Promise(t=>setTimeout(t,"user"===e.type?1e3:2e3))}addMessage(t){const e=document.createElement("div");return e.className="p-3 rounded-lg mb-2 max-w-[80%] "+("user"===t.type?"bg-indigo-600 mr-auto text-white":"bg-slate-700 ml-auto text-slate-200"),e.textContent=t.text,e.style.opacity="0",e.style.transform="translateY(10px)",this.chatContainer.appendChild(e),new Promise(t=>{gsap.to(e,{opacity:1,y:0,duration:.5,onComplete:t})})}}document.addEventListener("DOMContentLoaded",()=>{new RecruitmentHero,new ComparisonSlider,new InteractiveFlowchart,new RecruitmentDemo,document.querySelectorAll("section").forEach(t=>{BrightAnimations.fadeInUp(t)})});