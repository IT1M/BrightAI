document.addEventListener("DOMContentLoaded",()=>{initNavigation()});function initNavigation(){const nav=document.querySelector(".unified-nav"),mobileToggle=document.querySelector(".mobile-toggle"),mobileDrawer=document.querySelector(".mobile-menu-drawer"),backdrop=document.querySelector(".backdrop-overlay"),dropdownToggles=document.querySelectorAll('.nav-link[aria-haspopup="true"]');window.addEventListener("scroll",()=>{window.scrollY>20?(nav.style.background="rgba(2, 6, 23, 0.95)",nav.style.boxShadow="0 10px 30px -10px rgba(0,0,0,0.5)"):(nav.style.background="rgba(2, 6, 23, 0.85)",nav.style.boxShadow="none")});function toggleMobileMenu(){const isExpanded=mobileToggle.getAttribute("aria-expanded")==="true";mobileToggle.setAttribute("aria-expanded",!isExpanded),isExpanded?(mobileDrawer.classList.remove("active"),backdrop.classList.remove("active"),document.body.style.overflow=""):(mobileDrawer.classList.add("active"),backdrop.classList.add("active"),document.body.style.overflow="hidden")}mobileToggle&&mobileToggle.addEventListener("click",toggleMobileMenu),backdrop&&backdrop.addEventListener("click",toggleMobileMenu),document.addEventListener("keydown",e=>{e.key==="Escape"&&mobileDrawer.classList.contains("active")&&toggleMobileMenu()}),dropdownToggles.forEach(toggle=>{const navItem=toggle.closest(".nav-item"),dropdown=toggle.nextElementSibling;let closeTimer=null;const cancelClose=()=>{closeTimer&&(clearTimeout(closeTimer),closeTimer=null)},scheduleClose=()=>{closeTimer=setTimeout(()=>{toggle.getAttribute("aria-expanded")==="true"&&toggle.setAttribute("aria-expanded","false")},500)};navItem&&dropdown&&(navItem.addEventListener("mouseenter",()=>{window.innerWidth>=1024&&(cancelClose(),toggle.setAttribute("aria-expanded","true"))}),navItem.addEventListener("mouseleave",()=>{window.innerWidth>=1024&&scheduleClose()}),dropdown.addEventListener("mouseenter",()=>{window.innerWidth>=1024&&cancelClose()}),dropdown.addEventListener("mouseleave",()=>{window.innerWidth>=1024&&scheduleClose()})),toggle.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),toggle.setAttribute("aria-expanded",toggle.getAttribute("aria-expanded")==="true"?"false":"true"))})});const mobileDropdownToggles=document.querySelectorAll('.mobile-nav-link[aria-haspopup="true"]');mobileDropdownToggles.forEach(toggle=>{toggle.addEventListener("click",e=>{e.preventDefault();const submenu=toggle.nextElementSibling,isExpanded=toggle.getAttribute("aria-expanded")==="true";isExpanded||mobileDropdownToggles.forEach(other=>{if(other!==toggle){other.setAttribute("aria-expanded","false");const otherSub=other.nextElementSibling;otherSub&&otherSub.classList.contains("mobile-dropdown")&&otherSub.classList.remove("open")}}),toggle.setAttribute("aria-expanded",!isExpanded),submenu&&submenu.classList.toggle("open")})}),document.querySelectorAll(".dropdown-item").forEach(item=>{item.addEventListener("click",e=>{console.log("\u062A\u0645 \u0627\u0644\u0646\u0642\u0631 \u0639\u0644\u0649:",item.textContent.trim())})})}
